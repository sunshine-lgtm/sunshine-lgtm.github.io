<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HTTP请求模型 | Memory space</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/logo.jpg">
    <meta name="description" content="我的个人网站">
    
    <link rel="preload" href="/assets/css/0.styles.f4ede8b7.css" as="style"><link rel="preload" href="/assets/js/app.c82fcfef.js" as="script"><link rel="preload" href="/assets/js/2.aa37cc4a.js" as="script"><link rel="preload" href="/assets/js/7.0a0ece17.js" as="script"><link rel="prefetch" href="/assets/js/10.6f294fec.js"><link rel="prefetch" href="/assets/js/11.b4289dff.js"><link rel="prefetch" href="/assets/js/12.173792ea.js"><link rel="prefetch" href="/assets/js/13.708754d0.js"><link rel="prefetch" href="/assets/js/14.223281df.js"><link rel="prefetch" href="/assets/js/15.81d6b32f.js"><link rel="prefetch" href="/assets/js/16.119c4694.js"><link rel="prefetch" href="/assets/js/17.e3ab1571.js"><link rel="prefetch" href="/assets/js/18.cdb7faa6.js"><link rel="prefetch" href="/assets/js/19.e0eba592.js"><link rel="prefetch" href="/assets/js/3.c01d28e9.js"><link rel="prefetch" href="/assets/js/4.a3ab76d2.js"><link rel="prefetch" href="/assets/js/5.d11e0efd.js"><link rel="prefetch" href="/assets/js/6.a1da6671.js"><link rel="prefetch" href="/assets/js/8.5a4cd9ab.js"><link rel="prefetch" href="/assets/js/9.d72a2ae0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f4ede8b7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Memory space</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/accumulate/" class="nav-link">
  前端基础
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法题库
</a></div><div class="nav-item"><a href="https://github.com/sunshine-lgtm/blog.git" target="_blank" rel="noopener noreferrer" class="nav-link external">
  微博
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/accumulate/" class="nav-link">
  前端基础
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法题库
</a></div><div class="nav-item"><a href="https://github.com/sunshine-lgtm/blog.git" target="_blank" rel="noopener noreferrer" class="nav-link external">
  微博
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TypeScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>HTTP</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/HTTP/1.x.html" aria-current="page" class="active sidebar-link">HTTP 1.x</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/HTTP/1.x.html#http请求模型" class="sidebar-link">HTTP请求模型</a></li><li class="sidebar-sub-header"><a href="/HTTP/1.x.html#浏览器行为与http协议" class="sidebar-link">浏览器行为与HTTP协议</a></li><li class="sidebar-sub-header"><a href="/HTTP/1.x.html#什么是http协议" class="sidebar-link">什么是HTTP协议</a></li><li class="sidebar-sub-header"><a href="/HTTP/1.x.html#了解tcp-ip协议栈" class="sidebar-link">了解TCP/IP协议栈</a></li><li class="sidebar-sub-header"><a href="/HTTP/1.x.html#http在tcp-ip协议栈中的位置" class="sidebar-link">HTTP在TCP/IP协议栈中的位置</a></li><li class="sidebar-sub-header"><a href="/HTTP/1.x.html#http的工作过程" class="sidebar-link">HTTP的工作过程</a></li><li class="sidebar-sub-header"><a href="/HTTP/1.x.html#请求与响应" class="sidebar-link">请求与响应</a></li><li class="sidebar-sub-header"><a href="/HTTP/1.x.html#请求方法" class="sidebar-link">请求方法</a></li><li class="sidebar-sub-header"><a href="/HTTP/1.x.html#http状态码" class="sidebar-link">HTTP状态码</a></li><li class="sidebar-sub-header"><a href="/HTTP/1.x.html#常用的请求报头" class="sidebar-link">常用的请求报头</a></li><li class="sidebar-sub-header"><a href="/HTTP/1.x.html#常用的响应报头" class="sidebar-link">常用的响应报头</a></li><li class="sidebar-sub-header"><a href="/HTTP/1.x.html#常用的实体报头" class="sidebar-link">常用的实体报头</a></li><li class="sidebar-sub-header"><a href="/HTTP/1.x.html#cookie的使用" class="sidebar-link">cookie的使用</a></li><li class="sidebar-sub-header"><a href="/HTTP/1.x.html#session的使用" class="sidebar-link">Session的使用</a></li><li class="sidebar-sub-header"><a href="/HTTP/1.x.html#cookie跟session区别" class="sidebar-link">cookie跟session区别</a></li><li class="sidebar-sub-header"><a href="/HTTP/1.x.html#http缓存机制" class="sidebar-link">HTTP缓存机制</a></li><li class="sidebar-sub-header"><a href="/HTTP/1.x.html#强制缓存和协商缓存" class="sidebar-link">强制缓存和协商缓存</a></li></ul></li><li><a href="/HTTP/2.x.html" class="sidebar-link">HTTP 2.x</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="http请求模型"><a href="#http请求模型" class="header-anchor">#</a> HTTP请求模型</h2> <p>http之两个二：</p> <ul><li>客户端与服务端</li> <li>请求（requset）与响应（response）</li></ul> <h2 id="浏览器行为与http协议"><a href="#浏览器行为与http协议" class="header-anchor">#</a> 浏览器行为与HTTP协议</h2> <p>::: tip</p> <ol><li>输入网址并回车</li> <li>解析域名（DNS解析）</li> <li>浏览器发送HTTP请求</li> <li>服务器处理请求</li> <li>服务器返回HTML响应</li> <li>浏览器处理HTML内容</li> <li>继续请求其他资源
:::</li></ol> <h2 id="什么是http协议"><a href="#什么是http协议" class="header-anchor">#</a> 什么是HTTP协议</h2> <ul><li>HTTP是超文本传输协议，是从www浏览器传输到本地浏览器的一种传输协议。网站是基于HTTP协议的，例如网站的图片、CSS、JS等都是基于HTTP协议进行传输的。</li> <li>HTTP协议是由客户机到服务器的请求（requset）和服务器到客户机的响应（response）进行约束和规范。
<img src="/public/http/version.png" alt="HTTP发展"></li></ul> <h2 id="了解tcp-ip协议栈"><a href="#了解tcp-ip协议栈" class="header-anchor">#</a> 了解TCP/IP协议栈</h2> <p><img src="/public/http/tcp.png" alt="协议">
左边是 <strong>ISO/OSI标准协议</strong>（7层协议），右边是 <strong>事实协议</strong>（5层协议），<strong>ISO/OSI标准协议</strong> 是对 <strong>事实协议</strong> 的一个补充，最初设计不完整，现在很多协议都是按照 <strong>ISO/OSI标准协议</strong> 来设计</p> <p><strong>应用层</strong></p> <p>为用户提供所需要的各种服务，例如：HTTP、FTP、DNS、SMTP等</p> <p><strong>传输层</strong></p> <p>为应用层实体提供端到端的通信功能，保证数据包的顺序传送及数据的完整性。该层定义了两个主要的协议：传输控制协议（TCP）和用户数据包协议（UDP）</p> <p><strong>网络层</strong></p> <p>主要解决主机到主机的通信问题。IP协议是网际互联层最重要的协议</p> <p><strong>网络接口层</strong></p> <p>负责监视数据在网络和主机之间的交换</p> <h2 id="http在tcp-ip协议栈中的位置"><a href="#http在tcp-ip协议栈中的位置" class="header-anchor">#</a> HTTP在TCP/IP协议栈中的位置</h2> <p>目前普遍应用版本HTTP1.1,正在逐步向HTTP 2迁移，HTTP默认端口号为80，HTTPS默认端口号为443，HTTP跟HTTPS是两个不同的协议</p> <p><img src="/public/http/http_position.png" alt="协议"></p> <h2 id="http的工作过程"><a href="#http的工作过程" class="header-anchor">#</a> HTTP的工作过程</h2> <p>一次HTTP操作称为一个事务，其过程分为四步：</p> <p>*** 事物：是指所有的事情处理完并且成功了 ***</p> <ul><li>首先客户机与服务器需要建立连接（由TCP）。只要单击某个超级连接，HTTP的工作开始。</li> <li>建立连接后，客户机发送一个请求给服务器，请求方式的格式为：统一资源标识符（URL）、协议版本号、后边是MIME信息包括请求修饰符，客户机信息和可能的内容</li> <li>服务器接到请求后，给予相应的响应信息，其格式为一个状态行，包括信息的协议版本号、一个成功或错误额代码，后边是MIME信息包括服务器信息、实体信息和可能的内容</li> <li>客户端接收到服务器所返回的信息通过浏览器显示在用户的屏幕上，然后客户机与服务器断开连接</li></ul> <p>*** 如果在以上步骤中，只要一个步骤出现错误，那么产生的错误信息将返回到客户端，由显示屏输出。对于用户来说，这些过程都是由HTTP自己完成的，用户只要用鼠标点击，等待信息显示就可以了 ***</p> <h2 id="请求与响应"><a href="#请求与响应" class="header-anchor">#</a> 请求与响应</h2> <p>HTTP请求组成：请求行、消息报头、请求正文
HTTP响应组成：状态行、消息报头、响应正文
请求行组成：以一个方法符号开头（POST、GET），后面跟着请求的URL和协议的版本
状态行组成：服务器HTTP协议的版本、服务器返回的响应状态代码和状态代码的文本描述
<strong>请求</strong>
::: requset
<img src="/public/http/requset_head_1.png" alt="请求">
:::
<strong>响应</strong>
::: response
<img src="/public/http/response_head_1.png" alt="请求">
:::</p> <h2 id="请求方法"><a href="#请求方法" class="header-anchor">#</a> 请求方法</h2> <p>::: 概述</p> <ul><li>GET: 请求获取Requset-URI所标识的资源</li> <li>POST: 在Requset-URI所标识的资源后附加新的数据</li> <li>HEAD: 请求获取由Requset-URI所标识的资源的响应消息报头</li> <li>PUT: 请求服务器存储一个资源，并用Requset-URI作为其标识</li> <li>DELETE: 请求服务器删除Requset_URI所标识的资源</li> <li>TREACE: 请求服务器回送收到的请求信息，主要用于测试或诊断</li> <li>CONNECT: HTTP1.1协议中预留能够将连接改为管道方式的代理服务器</li> <li>OPTIONS: 请求查询服务器的性能，或者查询与资源相关的选项和需求（MongoDB）</li></ul> <p>严格按照rustful协议设计的接口是可以看到PUT和DELETE的
HEAD方法请求时，服务器返回没有响应体，获取返回的请求头；GET、POST、PUT、DELETE是数据操作形式的，对应增删改查，HEAD、TRACE、CONNECT、OPTIONS相当于是指令，用来查询或者检测连接
:::</p> <h2 id="http状态码"><a href="#http状态码" class="header-anchor">#</a> HTTP状态码</h2> <p>状态代码有三位数字组成，第一位数字代表了响应的类别，且有5种可能的取值
1xx: 提示信息--表示请求已收到，继续处理
2xx: 成功--表示请求已被成功接受、理解、接受
3xx: 重定向--要完成请求必须进行进一步操作（比如服务器地址重定向）
4xx: 客户端错误--请求有语法错误或请求无法实现(404找不到页面)
5xx: 服务端错误--服务端未能实现合法的请求（502 Bad Gateway 网关错误）</p> <h2 id="常用的请求报头"><a href="#常用的请求报头" class="header-anchor">#</a> 常用的请求报头</h2> <p>Accept: 请求报头域用于说明客户端接受哪些类型的信息。eg:Accept:image/gif,Accept:text/
htmlAccept-Charset 请求报头域用于指定客户端接受的字符集。Accept-Encoding：Accept-Encoding请求报头域类似于Accept，但是它是用于指定可接受的内容编码。
Accept-Language 请求报头域类似于Accept，但是它是用于指定一种自然语言
Authorization 请求报头域主要用于证明客户端有权查看某个资源。当浏览器访问一个页面时，如果收到服务器的响应代码为401（未授权），可以发送一个包含Authorization请求报头域的请求，要求服务器对其进行验证。
Host 请求报头域主要用于指定被请求资源的Internet主机和端口号，它通常从HTTP URL中提取出来的，发送请求时，该报头域是必需的。
User-Agent 请求报头域允许客户端将它的操作系统、浏览器和其它属性告诉服务器。
Referer 告诉服务器该网页是从哪个页面链接过来的，服务器可以用来处理验证，查看是否有权限，是否是反爬虫操作（查看是否填写referer）</p> <h2 id="常用的响应报头"><a href="#常用的响应报头" class="header-anchor">#</a> 常用的响应报头</h2> <p>Location 响应报头域用于重定向接受者到一个新的位置。Location响应 报头域常用在更换域名的时候。</p> <p>Server 响应报头域包含了服务器用来处理请求的软件信息。与UserAgent请求报头域是相对应的。</p> <p>WWW-Authenticate 响应报头域必须被包含在401（未授权的）响应消息中，客户端收到401响应消息时候，并发送Authorization报头域请求服务器对其进行验证时，服务端响应报头就包含该报头域。</p> <h2 id="常用的实体报头"><a href="#常用的实体报头" class="header-anchor">#</a> 常用的实体报头</h2> <p>Content-Encoding 实体报头域被用作媒体类型的修饰符，它的值指示了已经被应用到实体正文的附加内容的编码，因而要获得Content-Type报头域中所引用的媒体类型，必须采用相应的解码机制。</p> <p>Content-Language 实体报头域描述了资源所用的自然语言。</p> <p>Content-Length 实体报头域用于指明实体正文的长度，以字节方式存储的十进制数字来表示。</p> <p>Content-Type 实体报头域用语指明发送给接收者的实体正文的媒体类型。</p> <p>Last-Modified 实体报头域用于指示资源的最后修改日期和时间。</p> <p>Expires 实体报头域给出响应过期的日期和时间。</p> <p>##cookies与session</p> <ul><li>cookies 是保存在客户端的一小段文本，随客户端的每一个请求发送该url下的所有cookies到服务器端</li> <li>session 则保存在服务器端，通过唯一的值SessionID来区别每一个用户。SessionID随每个连接请求发送到服务器，服务器根据SessionID来识别客户端，再通过session的key获取session的值。</li></ul> <h2 id="cookie的使用"><a href="#cookie的使用" class="header-anchor">#</a> cookie的使用</h2> <p>与Cookie相关的HTTP扩展头</p> <ol><li>Cookie：客户端将服务端设置的cookie返回到服务端</li> <li>Set-Cookie: 服务端向客户端设置cookie</li></ol> <p>服务器在响应消息中用Set-Cookie头将Cookie的内容回送给客户端，客户端在新的请求中将相同的内容携带在Cookie头中发送给服务器。从而实现会话的保持</p> <h2 id="session的使用"><a href="#session的使用" class="header-anchor">#</a> Session的使用</h2> <ol><li>使用cookie来实现</li> <li>使用URL回显来实现</li></ol> <p>HTTP协议是无状态的，session不能依据HTTP连接来判断是否为同一客户，因此服务器向客户端浏览器发送一个名为SESSIONID的cookie，它的值为该Session的id。Session依据该cookie来识别是否为同一用户。</p> <h2 id="cookie跟session区别"><a href="#cookie跟session区别" class="header-anchor">#</a> cookie跟session区别</h2> <ul><li>cookie数据存放在客户的浏览器上，session数据放在服务器上</li> <li>cookie不是很安全，别人可以分析存放在本地的cookie并进行cookie欺骗，考虑*到安全应当使用session</li> <li>session会在一定时间内保存在服务器上，当访问增多，会比较占用你服务器的性能，考虑到减轻服务器性能方面，应当使用cookie</li> <li>单个cookie保存的数据不能超过4K，很多浏览器都限制一个站点最多保存20个cookie</li> <li>建议将登录信息等重要信息存放为session，其他信息如果需要保留，可以放在cookie中</li> <li>session保存在服务器，客户端不知道其中的信息；cookie保存在客户端，服务器能够知道其中的信息</li> <li>session中保存的是对象，cookie中保存的是字符串</li></ul> <h2 id="http缓存机制"><a href="#http缓存机制" class="header-anchor">#</a> HTTP缓存机制</h2> <p>缓存会根据请求保存输出内容的副本，例如html页面，图片，文件，当下一个请求来到的时候：如果是相同的URL，缓存直接使用副本响应访问请求，而不是向源服务器再次发送请求。
缓存的优点：</p> <ol><li>减少相应延迟</li> <li>减少网络带宽消耗</li> <li>减少通信耗损</li></ol> <p>** 有缓存 **</p> <p>::: requset
<img src="/public/http/browser__cache_1.png" alt="有缓存">
:::</p> <p>** 无缓存 **</p> <p>::: requset
<img src="/public/http/browser__cache_2.png" alt="有缓存">
:::</p> <h2 id="强制缓存和协商缓存"><a href="#强制缓存和协商缓存" class="header-anchor">#</a> 强制缓存和协商缓存</h2> <ul><li><p>强制缓存，服务器通知浏览器一个缓存时间，在缓存时间内，下次请求直接用缓存，不在时间内，执行比较缓存策略</p></li> <li><p>协商缓存，将缓存信息中的Etag和Last-Modified通过请求发送给服务器，由服务器校验，返回304状态码时，浏览器直接使用缓存</p></li> <li><p>Etag/If-None-Match策略</p></li> <li><p>Last-Modified/If-Modified-Since策略</p></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/TypeScript/基础知识.html" class="prev">
        基础知识
      </a></span> <span class="next"><a href="/HTTP/2.x.html">
        HTTP 2.x
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.c82fcfef.js" defer></script><script src="/assets/js/2.aa37cc4a.js" defer></script><script src="/assets/js/7.0a0ece17.js" defer></script>
  </body>
</html>
